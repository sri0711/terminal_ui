#!/bin/sh
set -e

echo "ðŸ”§ Setting up git hooks..."

# Use repo-local hooks
git config core.hooksPath .githooks

# Install cargo-commitlint if missing
if ! command -v cargo-commitlint >/dev/null 2>&1; then
  echo "ðŸ“¦ Installing cargo-commitlint..."
  cargo install cargo-commitlint
else
  echo "âœ… cargo-commitlint already installed"
fi

echo "ðŸŽ‰ Git hooks ready!"

echo "Running rustfmt..."
cargo fmt --all

echo "Running clippy..."
cargo clippy --all-targets --all-features -- -D warnings

echo "All checks passed!"
